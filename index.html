<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>מחשבון ריבית דריבית | Compound Interest Calculator</title>
    <meta name="description" content="מחשבון ריבית דריבית מתקדם - חשבו בקלות את התשואה על ההשקעות שלכם">
    
    <!-- Multi-language SEO -->
    <link rel="alternate" hreflang="he" href="?lang=he" />
    <link rel="alternate" hreflang="en" href="?lang=en" />
    <link rel="alternate" hreflang="es" href="?lang=es" />
    <link rel="alternate" hreflang="ar" href="?lang=ar" />
    <link rel="alternate" hreflang="x-default" href="/" />
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Almarai:wght@300;400;700;800&family=IBM+Plex+Sans+Arabic:wght@300;400;500;600;700&family=Inter:wght@300;400;500;600;700;800&family=Cairo:wght@300;400;600;700;800&display=swap');
        
        :root {
            --primary: #0f172a;
            --secondary: #1e293b;
            --accent: #3b82f6;
            --accent-hover: #2563eb;
            --royal-blue: #2563eb;
            --success: #10b981;
            --warning: #f59e0b;
            --bg-primary: #ffffff;
            --bg-secondary: #f8fafc;
            --bg-tertiary: #f1f5f9;
            --text-primary: #0f172a;
            --text-secondary: #64748b;
            --border: #e2e8f0;
            --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
            --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
            --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        html {
            scroll-behavior: smooth;
        }
        
        body {
            font-family: 'IBM Plex Sans Arabic', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: var(--bg-secondary);
            color: var(--text-primary);
            line-height: 1.6;
            overflow-x: hidden;
        }
        
        /* Font families per language */
        body[lang="he"] {
            font-family: 'IBM Plex Sans Arabic', -apple-system, BlinkMacSystemFont, sans-serif;
        }
        
        body[lang="en"], body[lang="es"] {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
        }
        
        body[lang="ar"] {
            font-family: 'Cairo', 'IBM Plex Sans Arabic', sans-serif;
        }
        
        body[lang="he"] h1, body[lang="ar"] h1 {
            font-family: 'Almarai', sans-serif;
        }
        
        body[lang="en"] h1, body[lang="es"] h1 {
            font-family: 'Inter', sans-serif;
        }
        
        /* Language Switcher - Fixed Position */
        .language-switcher {
            display: flex;
            flex-direction: row;
            direction: ltr !important;
            gap: 0.5rem;
            justify-content: center;
            padding: 1rem 0 0.5rem;
            background: transparent;
            max-width: 400px;
            margin: 0 auto;
        }
        
        .lang-btn {
            padding: 0.4rem 0.8rem;
            border: 1px solid rgba(255, 255, 255, 0.3);
            background: rgba(255, 255, 255, 0.1);
            cursor: pointer;
            font-weight: 600;
            font-size: 0.75rem;
            border-radius: 6px;
            transition: all 0.3s ease;
            color: white;
            backdrop-filter: blur(10px);
            text-align: center;
            flex: 1;
            min-width: 0;
        }
        
        .lang-btn[data-lang="en"] {
            order: 1;
        }
        
        .lang-btn[data-lang="es"] {
            order: 2;
        }
        
        .lang-btn[data-lang="ar"] {
            order: 3;
        }
        
        .lang-btn[data-lang="he"] {
            order: 4;
        }
        
        .lang-btn:hover {
            background: rgba(255, 255, 255, 0.2);
            border-color: rgba(255, 255, 255, 0.5);
        }
        
        .lang-btn.active {
            background: white;
            color: var(--royal-blue);
            border-color: white;
        }
        
        /* Hero Section */
        .hero {
            background: var(--royal-blue);
            padding: 0 1.5rem 4.5rem;
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        
        .hero::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                radial-gradient(circle at 20% 50%, rgba(255, 255, 255, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 80% 80%, rgba(255, 255, 255, 0.1) 0%, transparent 50%);
            pointer-events: none;
        }
        
        .hero-content {
            max-width: 1200px;
            margin: 0 auto;
            position: relative;
            z-index: 1;
        }
        
        h1 {
            font-size: clamp(1.75rem, 4.5vw, 3rem);
            font-weight: 800;
            color: white;
            margin-bottom: 0.75rem;
            letter-spacing: -0.02em;
            animation: fadeInUp 0.6s ease-out;
            padding-top: 0.75rem;
        }
        
        /* Calculator Container */
        .container {
            max-width: 1200px;
            margin: -3rem auto 3rem;
            padding: 0 1.5rem;
            position: relative;
            z-index: 10;
        }
        
        .calculator-wrapper {
            background: white;
            border-radius: 24px;
            box-shadow: var(--shadow-xl), 0 0 0 1px rgba(0, 0, 0, 0.05);
            padding: clamp(1.75rem, 4.5vw, 2.5rem);
            animation: fadeInUp 0.8s ease-out 0.2s backwards;
        }
        
        /* Form Sections */
        .form-section {
            display: grid;
            gap: 1.25rem;
            margin-bottom: 1.5rem;
        }
        
        @media (min-width: 768px) {
            .form-section {
                grid-template-columns: repeat(2, 1fr);
            }
        }
        
        /* Input Groups */
        .input-group {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }
        
        .input-group label {
            font-weight: 600;
            color: var(--text-primary);
            font-size: 0.9rem;
        }
        
        .input-wrapper {
            position: relative;
        }
        
        input[type="number"] {
            width: 100%;
            padding: 0.85rem 1.1rem;
            border: 2px solid var(--border);
            border-radius: 12px;
            font-size: 1rem;
            font-family: inherit;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        input[type="number"]:focus {
            outline: none;
            border-color: var(--accent);
            box-shadow: 0 0 0 4px rgba(59, 130, 246, 0.1);
            transform: translateY(-1px);
        }
        
        input[type="number"]:hover {
            border-color: var(--accent);
        }
        
        /* Calculate Button */
        .calculate-btn {
            width: 100%;
            padding: 0.95rem 1.75rem;
            background: var(--accent);
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 1.05rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 4px 6px -1px rgba(59, 130, 246, 0.3);
            font-family: inherit;
            position: relative;
            overflow: hidden;
        }
        
        .calculate-btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.3);
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }
        
        .calculate-btn:hover::before {
            width: 300px;
            height: 300px;
        }
        
        .calculate-btn:hover {
            background: var(--accent-hover);
            transform: translateY(-2px);
            box-shadow: 0 8px 12px -2px rgba(59, 130, 246, 0.4);
        }
        
        .calculate-btn:active {
            transform: translateY(0);
            box-shadow: 0 4px 6px -1px rgba(59, 130, 246, 0.3);
        }
        
        /* Results Section */
        .results {
            margin-top: 1.5rem;
            padding-top: 1.5rem;
            border-top: 2px solid var(--border);
            animation: fadeIn 0.5s ease-out;
        }
        
        .results-grid {
            display: grid;
            gap: 1rem;
            margin-bottom: 1.25rem;
        }
        
        @media (min-width: 768px) {
            .results-grid {
                grid-template-columns: repeat(3, 1fr);
            }
        }
        
        .result-card {
            background: var(--bg-secondary);
            padding: 1.1rem;
            border-radius: 12px;
            border: 2px solid var(--border);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }
        
        .result-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(59, 130, 246, 0.1), transparent);
            transition: left 0.6s;
        }
        
        .result-card:hover::before {
            left: 100%;
        }
        
        .result-card:hover {
            border-color: var(--accent);
            box-shadow: 0 8px 16px rgba(59, 130, 246, 0.15);
            transform: translateY(-4px);
        }
        
        .result-card h3 {
            font-size: 0.85rem;
            color: var(--text-secondary);
            margin-bottom: 0.5rem;
            font-weight: 600;
        }
        
        .result-card .value {
            font-size: 1.5rem;
            font-weight: 800;
            color: var(--text-primary);
            word-break: break-word;
        }
        
        .result-card.highlight {
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.1), rgba(37, 99, 235, 0.05));
            border-color: var(--accent);
        }
        
        .result-card.highlight .value {
            color: var(--accent);
        }
        
        /* Chart Container */
        .chart-container {
            background: var(--bg-secondary);
            padding: 1.1rem;
            border-radius: 12px;
            border: 2px solid var(--border);
            margin-top: 1rem;
            height: 350px;
            position: relative;
            width: 100%;
        }
        
        @media (max-width: 768px) {
            .chart-container {
                height: 280px;
                padding: 0.9rem;
            }
        }
        
        .chart-container canvas {
            width: 100% !important;
            height: 100% !important;
        }
        
        /* Animations */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        @keyframes fadeIn {
            from {
                opacity: 0;
            }
            to {
                opacity: 1;
            }
        }
        
        /* Info Section */
        .info-section {
            max-width: 1200px;
            margin: 4rem auto;
            padding: 0 1.5rem;
        }
        
        .explanation {
            background: white;
            padding: 2rem;
            border-radius: 16px;
            box-shadow: var(--shadow-md);
            margin-bottom: 3rem;
        }
        
        .explanation h2 {
            font-family: inherit;
            font-size: 1.75rem;
            font-weight: 800;
            margin-bottom: 1.5rem;
            color: var(--primary);
        }
        
        .explanation p {
            color: var(--text-secondary);
            line-height: 1.8;
            margin-bottom: 1rem;
        }
        
        /* כרטיס "הידעתם?" יחיד */
        .info-card {
            background: white;
            padding: 2.5rem;
            border-radius: 16px;
            box-shadow: var(--shadow-md);
            transition: all 0.3s ease;
            max-width: 800px;
            margin: 0 auto;
        }
        
        .info-card:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-lg);
        }
        
        .info-card h3 {
            font-family: inherit;
            font-size: 1.75rem;
            font-weight: 700;
            margin-bottom: 1.5rem;
            color: var(--primary);
        }
        
        .info-card p {
            color: var(--text-secondary);
            line-height: 1.8;
            font-size: 1.1rem;
        }
        
        /* Detailed Footer */
        footer {
            background: var(--royal-blue);
            color: white;
            padding: 3rem 1.5rem 2rem;
            margin-top: 4rem;
        }
        
        .footer-content {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .footer-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
            margin-bottom: 2rem;
        }
        
        .footer-section h4 {
            font-family: inherit;
            font-size: 1.25rem;
            font-weight: 700;
            margin-bottom: 1rem;
        }
        
        .footer-section p, .footer-section ul {
            color: rgba(255, 255, 255, 0.8);
            line-height: 1.8;
        }
        
        .footer-section ul {
            list-style: none;
            padding: 0;
        }
        
        .footer-section ul li {
            padding: 0.25rem 0;
            padding-right: 1.5rem;
            position: relative;
        }
        
        [dir="ltr"] .footer-section ul li {
            padding-right: 0;
            padding-left: 1.5rem;
        }
        
        .footer-section ul li::before {
            content: '•';
            position: absolute;
            right: 0;
            color: rgba(255, 255, 255, 0.6);
        }
        
        [dir="ltr"] .footer-section ul li::before {
            left: 0;
            right: auto;
        }
        
        .footer-bottom {
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            padding-top: 2rem;
            text-align: center;
        }
        
        .footer-bottom p {
            color: rgba(255, 255, 255, 0.8);
            font-size: 0.875rem;
        }
        
        /* Responsive Design */
        @media (max-width: 768px) {
            h1 {
                font-size: 2rem;
            }
            
            .calculator-wrapper {
                padding: 1.5rem;
            }
            
            .form-section {
                grid-template-columns: 1fr;
            }
            
            .results-grid {
                grid-template-columns: 1fr;
            }
            
            .footer-grid {
                grid-template-columns: 1fr;
            }
            
            .result-card .value {
                font-size: 1.35rem;
            }
        }
    </style>
</head>
<body lang="he" dir="rtl">
    <!-- Hero Section with Language Switcher -->
    <div class="hero">
        <div class="hero-content">
            <div class="language-switcher">
                <button class="lang-btn" data-lang="en">English</button>
                <button class="lang-btn" data-lang="es">Español</button>
                <button class="lang-btn" data-lang="ar">العربية</button>
                <button class="lang-btn active" data-lang="he">עברית</button>
            </div>
            <h1 id="main-title">מחשבון ריבית דריבית</h1>
        </div>
    </div>

    <!-- Calculator Container -->
    <div class="container">
        <div class="calculator-wrapper">
            <form class="form-section" onsubmit="calculateCompound(event)">
                <!-- Principal Amount -->
                <div class="input-group">
                    <label for="principal" id="label-principal">סכום התחלתי</label>
                    <div class="input-wrapper">
                        <input 
                            type="number" 
                            id="principal" 
                            min="0" 
                            step="any"
                            placeholder=""
                        >
                    </div>
                </div>

                <!-- Monthly Contribution -->
                <div class="input-group">
                    <label for="monthly" id="label-monthly">הפקדה חודשית</label>
                    <div class="input-wrapper">
                        <input 
                            type="number" 
                            id="monthly" 
                            min="0" 
                            step="any"
                            placeholder=""
                        >
                    </div>
                </div>

                <!-- Annual Rate -->
                <div class="input-group">
                    <label for="rate" id="label-rate">ריבית שנתית (%)</label>
                    <div class="input-wrapper">
                        <input 
                            type="number" 
                            id="rate" 
                            min="0" 
                            step="any"
                            placeholder=""
                        >
                    </div>
                </div>

                <!-- Years -->
                <div class="input-group">
                    <label for="years" id="label-years">תקופה (שנים)</label>
                    <div class="input-wrapper">
                        <input 
                            type="number" 
                            id="years" 
                            min="0" 
                            step="any"
                            placeholder=""
                        >
                    </div>
                </div>

                <!-- Calculate Button (Full Width) -->
                <div style="grid-column: 1 / -1;">
                    <button type="submit" class="calculate-btn" id="calculate-btn">חשב</button>
                </div>
            </form>

            <!-- Results -->
            <div class="results" id="results">
                <div class="results-grid">
                    <div class="result-card highlight">
                        <h3 id="result-label-final">סכום סופי</h3>
                        <div class="value" id="final-amount">0</div>
                    </div>
                    <div class="result-card">
                        <h3 id="result-label-contributions">סך הפקדות</h3>
                        <div class="value" id="total-contributions">0</div>
                    </div>
                    <div class="result-card">
                        <h3 id="result-label-interest">רווח מריבית</h3>
                        <div class="value" id="interest-earned">0</div>
                    </div>
                </div>

                <!-- Chart -->
                <div class="chart-container">
                    <canvas id="growthChart"></canvas>
                </div>
            </div>
        </div>
    </div>

    <!-- Info Section -->
    <div class="info-section">
        <div class="explanation">
            <h2 id="explanation-title">מה זה ריבית דריבית?</h2>
            <p id="explanation-p1">ריבית דריבית היא תופעה פיננסית שבה הריבית שמרוויחים מצטרפת לקרן המקורית, וממשיכה להרוויח ריבית בעצמה. במילים פשוטות - זה "ריבית על הריבית".</p>
            <p id="explanation-p2">בניגוד לריבית פשוטה שמחושבת רק על הסכום המקורי, ריבית דריבית גורמת להשקעה לצמוח בקצב מואץ לאורך זמן. ככל שתקופת ההשקעה ארוכה יותר, כך ההשפעה של הריבית דריבית חזקה יותר.</p>
        </div>

        <!-- כרטיס יחיד "הידעתם?" -->
        <div class="info-card">
            <h3 id="info-title">הידעתם?</h3>
            <p id="info-text">אלברט איינשטיין כינה את הריבית דריבית כפלא השמיני בתבל - מי שמבין זאת, מרוויח. מי שלא - משלם.</p>
        </div>
    </div>

    <!-- Detailed Footer -->
    <footer>
        <div class="footer-content">
            <div class="footer-grid">
                <div class="footer-section">
                    <h4 id="footer-about-title">אודות</h4>
                    <p id="footer-about-text">מחשבון ריבית דריבית מתקדם המאפשר לכם לחשב בקלות את התשואה הצפויה על ההשקעות שלכם ולתכנן את העתיד הפיננסי שלכם.</p>
                </div>

                <div class="footer-section">
                    <h4 id="footer-disclaimer-title">הצהרת אחריות</h4>
                    <p id="footer-disclaimer-text">המידע והכלים באתר זה הם למטרות חינוכיות בלבד ואינם מהווים ייעוץ פיננסי, השקעתי או מקצועי. תמיד התייעצו עם יועץ פיננסי מוסמך.</p>
                </div>

                <div class="footer-section">
                    <h4 id="footer-terms-title">תנאי שימוש</h4>
                    <ul>
                        <li id="footer-terms-li1">השימוש באתר הוא על אחריותכם הבלבדית</li>
                        <li id="footer-terms-li2">החישובים מבוססים על הנתונים שהזנתם</li>
                        <li id="footer-terms-li3">התוצאות הן הערכות בלבד</li>
                        <li id="footer-terms-li4">איננו אחראים להחלטות השקעה</li>
                    </ul>
                </div>
            </div>

            <div class="footer-bottom">
                <p id="footer-copyright">© 2026 מחשבון ריבית דריבית. כל הזכויות שמורות.</p>
                <p style="margin-top: 0.5rem; font-size: 0.75rem;" id="footer-privacy">מדיניות פרטיות: אנחנו לא אוספים או שומרים מידע אישי. כל החישובים נעשים בדפדפן שלכם.</p>
            </div>
        </div>
    </footer>

    <script>
        // תרגומים מתוקנים לכל 4 השפות
        const translations = {
            he: {
                main_title: 'מחשבון ריבית דריבית',
                label_principal: 'סכום התחלתי',
                label_monthly: 'הפקדה חודשית',
                label_rate: 'ריבית שנתית (%)',
                label_years: 'תקופה (שנים)',
                calculate_btn: 'חשב',
                result_final: 'סכום סופי',
                result_contributions: 'סך הפקדות',
                result_interest: 'רווח מריבית',
                chart_start: 'התחלה',
                chart_principal: 'יתרה כוללת',
                chart_contributions: 'סך הפקדות',
                chart_year: 'שנה',
                explanation_title: 'מה זה ריבית דריבית?',
                explanation_p1: 'ריבית דריבית היא תופעה פיננסית שבה הריבית שמרוויחים מצטרפת לקרן המקורית, וממשיכה להרוויח ריבית בעצמה. במילים פשוטות - זה "ריבית על הריבית".',
                explanation_p2: 'בניגוד לריבית פשוטה שמחושבת רק על הסכום המקורי, ריבית דריבית גורמת להשקעה לצמוח בקצב מואץ לאורך זמן. ככל שתקופת ההשקעה ארוכה יותר, כך ההשפעה של הריבית דריבית חזקה יותר.',
                info_title: 'הידעתם?',
                info_text: 'אלברט איינשטיין כינה את הריבית דריבית כפלא השמיני בתבל - מי שמבין זאת, מרוויח. מי שלא - משלם.',
                footer_about_title: 'אודות',
                footer_about_text: 'מחשבון ריבית דריבית מתקדם המאפשר לכם לחשב בקלות את התשואה הצפויה על ההשקעות שלכם ולתכנן את העתיד הפיננסי שלכם.',
                footer_disclaimer_title: 'הצהרת אחריות',
                footer_disclaimer_text: 'המידע והכלים באתר זה הם למטרות חינוכיות בלבד ואינם מהווים ייעוץ פיננסי, השקעתי או מקצועי. תמיד התייעצו עם יועץ פיננסי מוסמך.',
                footer_terms_title: 'תנאי שימוש',
                footer_terms_li1: 'השימוש באתר הוא על אחריותכם הבלבדית',
                footer_terms_li2: 'החישובים מבוססים על הנתונים שהזנתם',
                footer_terms_li3: 'התוצאות הן הערכות בלבד',
                footer_terms_li4: 'איננו אחראים להחלטות השקעה',
                footer_copyright: '© 2026 מחשבון ריבית דריבית. כל הזכויות שמורות.',
                footer_privacy: 'מדיניות פרטיות: אנחנו לא אוספים או שומרים מידע אישי. כל החישובים נעשים בדפדפן שלכם.'
            },
            en: {
                main_title: 'Compound Interest Calculator',
                label_principal: 'Initial Amount',
                label_monthly: 'Monthly Contribution',
                label_rate: 'Annual Interest Rate (%)',
                label_years: 'Time Period (Years)',
                calculate_btn: 'Calculate',
                result_final: 'Final Amount',
                result_contributions: 'Total Contributions',
                result_interest: 'Interest Earned',
                chart_start: 'Start',
                chart_principal: 'Total Balance',
                chart_contributions: 'Total Contributions',
                chart_year: 'Year',
                explanation_title: 'What is Compound Interest?',
                explanation_p1: 'Compound interest is a financial phenomenon where the interest earned is added to the principal amount and continues to earn interest itself. In simple terms - it\'s "interest on interest."',
                explanation_p2: 'Unlike simple interest, which is calculated only on the original amount, compound interest causes investments to grow at an accelerated rate over time. The longer the investment period, the stronger the effect of compound interest.',
                info_title: 'Did You Know?',
                info_text: 'Albert Einstein called compound interest the eighth wonder of the world - those who understand it, earn. Those who don\'t, pay.',
                footer_about_title: 'About',
                footer_about_text: 'An advanced compound interest calculator that allows you to easily calculate the expected return on your investments and plan your financial future.',
                footer_disclaimer_title: 'Disclaimer',
                footer_disclaimer_text: 'The information and tools on this site are for educational purposes only and do not constitute financial, investment, or professional advice. Always consult with a licensed financial advisor.',
                footer_terms_title: 'Terms of Use',
                footer_terms_li1: 'Use of the site is at your own risk',
                footer_terms_li2: 'Calculations are based on data you entered',
                footer_terms_li3: 'Results are estimates only',
                footer_terms_li4: 'We are not responsible for investment decisions',
                footer_copyright: '© 2026 Compound Interest Calculator. All rights reserved.',
                footer_privacy: 'Privacy Policy: We do not collect or store personal information. All calculations are performed in your browser.'
            },
            es: {
                main_title: 'Calculadora de Interés Compuesto',
                label_principal: 'Cantidad Inicial',
                label_monthly: 'Aportación Mensual',
                label_rate: 'Tasa de Interés Anual (%)',
                label_years: 'Período de Tiempo (Años)',
                calculate_btn: 'Calcular',
                result_final: 'Cantidad Final',
                result_contributions: 'Contribuciones Totales',
                result_interest: 'Interés Ganado',
                chart_start: 'Inicio',
                chart_principal: 'Saldo Total',
                chart_contributions: 'Contribuciones Totales',
                chart_year: 'Año',
                explanation_title: '¿Qué es el Interés Compuesto?',
                explanation_p1: 'El interés compuesto es un fenómeno financiero donde el interés ganado se suma al monto principal y continúa ganando interés por sí mismo. En términos simples: es "interés sobre interés".',
                explanation_p2: 'A diferencia del interés simple, que se calcula solo sobre la cantidad original, el interés compuesto hace que las inversiones crezcan a un ritmo acelerado con el tiempo. Cuanto más largo sea el período de inversión, más fuerte será el efecto del interés compuesto.',
                info_title: '¿Sabías Que?',
                info_text: 'Albert Einstein llamó al interés compuesto la octava maravilla del mundo - quienes lo entienden, ganan. Quienes no, pagan.',
                footer_about_title: 'Acerca de',
                footer_about_text: 'Una calculadora avanzada de interés compuesto que te permite calcular fácilmente el rendimiento esperado de tus inversiones y planificar tu futuro financiero.',
                footer_disclaimer_title: 'Aviso Legal',
                footer_disclaimer_text: 'La información y herramientas en este sitio son solo con fines educativos y no constituyen asesoramiento financiero, de inversión o profesional. Siempre consulte con un asesor financiero autorizado.',
                footer_terms_title: 'Términos de Uso',
                footer_terms_li1: 'El uso del sitio es bajo su propio riesgo',
                footer_terms_li2: 'Los cálculos se basan en los datos que ingresó',
                footer_terms_li3: 'Los resultados son solo estimaciones',
                footer_terms_li4: 'No somos responsables de las decisiones de inversión',
                footer_copyright: '© 2026 Calculadora de Interés Compuesto. Todos los derechos reservados.',
                footer_privacy: 'Política de Privacidad: No recopilamos ni almacenamos información personal. Todos los cálculos se realizan en su navegador.'
            },
            ar: {
                main_title: 'حاسبة الفائدة المركبة',
                label_principal: 'المبلغ الأولي',
                label_monthly: 'المساهمة الشهرية',
                label_rate: 'معدل الفائدة السنوي (%)',
                label_years: 'الفترة الزمنية (بالسنوات)',
                calculate_btn: 'احسب',
                result_final: 'المبلغ النهائي',
                result_contributions: 'إجمالي المساهمات',
                result_interest: 'الفائدة المكتسبة',
                chart_start: 'البداية',
                chart_principal: 'الرصيد الإجمالي',
                chart_contributions: 'إجمالي المساهمات',
                chart_year: 'السنة',
                explanation_title: 'ما هي الفائدة المركبة؟',
                explanation_p1: 'الفائدة المركبة هي ظاهرة مالية حيث تُضاف الفائدة المكتسبة إلى المبلغ الأصلي وتستمر في كسب الفائدة بنفسها. ببساطة - إنها "فائدة على الفائدة".',
                explanation_p2: 'على عكس الفائدة البسيطة، التي تُحسب فقط على المبلغ الأصلي، فإن الفائدة المركبة تجعل الاستثمارات تنمو بمعدل متسارع مع مرور الوقت. كلما طالت فترة الاستثمار، كان تأثير الفائدة المركبة أقوى.',
                info_title: 'هل تعلم؟',
                info_text: 'أطلق ألبرت أينشتاين على الفائدة المركبة أعجوبة العالم الثامنة - من يفهمها يربح، ومن لا يفهمها يدفع.',
                footer_about_title: 'حول',
                footer_about_text: 'حاسبة متقدمة للفائدة المركبة تتيح لك حساب العائد المتوقع على استثماراتك بسهولة والتخطيط لمستقبلك المالي.',
                footer_disclaimer_title: 'إخلاء المسؤولية',
                footer_disclaimer_text: 'المعلومات والأدوات الموجودة على هذا الموقع هي لأغراض تعليمية فقط ولا تشكل نصيحة مالية أو استثمارية أو مهنية. استشر دائمًا مستشارًا ماليًا مرخصًا.',
                footer_terms_title: 'شروط الاستخدام',
                footer_terms_li1: 'استخدام الموقع على مسؤوليتك الخاصة',
                footer_terms_li2: 'الحسابات تعتمد على البيانات التي أدخلتها',
                footer_terms_li3: 'النتائج هي تقديرات فقط',
                footer_terms_li4: 'نحن غير مسؤولين عن قرارات الاستثمار',
                footer_copyright: '© 2026 حاسبة الفائدة المركبة. جميع الحقوق محفوظة.',
                footer_privacy: 'سياسة الخصوصية: نحن لا نجمع أو نخزن معلومات شخصية. يتم إجراء جميع الحسابات في متصفحك.'
            }
        };

        let currentLang = 'he';
        let chartInstance = null;

        // פונקציה להחלפת שפה
        function switchLanguage(lang) {
            currentLang = lang;
            const t = translations[lang];
            
            // עדכון כיוון הטקסט
            const body = document.body;
            if (lang === 'he' || lang === 'ar') {
                body.setAttribute('dir', 'rtl');
            } else {
                body.setAttribute('dir', 'ltr');
            }
            body.setAttribute('lang', lang);
            
            // עדכון כל הטקסטים
            document.getElementById('main-title').textContent = t.main_title;
            document.getElementById('label-principal').textContent = t.label_principal;
            document.getElementById('label-monthly').textContent = t.label_monthly;
            document.getElementById('label-rate').textContent = t.label_rate;
            document.getElementById('label-years').textContent = t.label_years;
            document.getElementById('calculate-btn').textContent = t.calculate_btn;
            document.getElementById('result-label-final').textContent = t.result_final;
            document.getElementById('result-label-contributions').textContent = t.result_contributions;
            document.getElementById('result-label-interest').textContent = t.result_interest;
            document.getElementById('explanation-title').textContent = t.explanation_title;
            document.getElementById('explanation-p1').textContent = t.explanation_p1;
            document.getElementById('explanation-p2').textContent = t.explanation_p2;
            document.getElementById('info-title').textContent = t.info_title;
            document.getElementById('info-text').textContent = t.info_text;
            document.getElementById('footer-about-title').textContent = t.footer_about_title;
            document.getElementById('footer-about-text').textContent = t.footer_about_text;
            document.getElementById('footer-disclaimer-title').textContent = t.footer_disclaimer_title;
            document.getElementById('footer-disclaimer-text').textContent = t.footer_disclaimer_text;
            document.getElementById('footer-terms-title').textContent = t.footer_terms_title;
            document.getElementById('footer-terms-li1').textContent = t.footer_terms_li1;
            document.getElementById('footer-terms-li2').textContent = t.footer_terms_li2;
            document.getElementById('footer-terms-li3').textContent = t.footer_terms_li3;
            document.getElementById('footer-terms-li4').textContent = t.footer_terms_li4;
            document.getElementById('footer-copyright').textContent = t.footer_copyright;
            document.getElementById('footer-privacy').textContent = t.footer_privacy;
            
            // עדכון כפתורי השפה
            document.querySelectorAll('.lang-btn').forEach(btn => {
                btn.classList.remove('active');
                if (btn.getAttribute('data-lang') === lang) {
                    btn.classList.add('active');
                }
            });
            
            // עדכון הגרף אם יש נתונים
            if (chartInstance && chartInstance.data.labels.length > 0) {
                updateChart(chartInstance.data.datasets[0].data, chartInstance.data.datasets[1].data);
            } else {
                updateChart([], []);
            }
        }

        // פונקציה לחישוב ריבית דריבית - עם חישוב שנתי תקין
        function calculateCompound(event) {
            event.preventDefault();
            
            // קריאת ערכים - אם ריק אז 0
            const principal = parseFloat(document.getElementById('principal').value) || 0;
            const monthly = parseFloat(document.getElementById('monthly').value) || 0;
            const rate = parseFloat(document.getElementById('rate').value) || 0;
            const years = parseFloat(document.getElementById('years').value) || 0;
            
            // חישוב עם ריבית שנתית תקינה
            const annualRate = rate / 100;
            
            let balance = principal;
            let totalContributions = principal;
            const balanceData = [principal];
            const contributionsData = [principal];
            
            // חישוב לכל שנה
            for (let year = 1; year <= years; year++) {
                // הוספת הפקדות חודשיות לאורך השנה + ריבית
                for (let month = 1; month <= 12; month++) {
                    balance += monthly;
                    totalContributions += monthly;
                    // ריבית חודשית (1/12 מהשנה)
                    balance = balance * (1 + annualRate / 12);
                }
                
                balanceData.push(balance);
                contributionsData.push(totalContributions);
            }
            
            const finalAmount = balance;
            const interestEarned = finalAmount - totalContributions;
            
            // עדכון התוצאות
            document.getElementById('final-amount').textContent = formatNumber(finalAmount);
            document.getElementById('total-contributions').textContent = formatNumber(totalContributions);
            document.getElementById('interest-earned').textContent = formatNumber(interestEarned);
            
            // עדכון הגרף
            updateChart(balanceData, contributionsData);
            
            // גלילה חלקה לתוצאות
            setTimeout(() => {
                document.getElementById('results').scrollIntoView({ 
                    behavior: 'smooth', 
                    block: 'nearest'
                });
            }, 100);
        }

        // פונקציה לעיצוב מספרים
        function formatNumber(num) {
            return new Intl.NumberFormat(currentLang === 'ar' ? 'ar' : currentLang === 'he' ? 'he-IL' : currentLang === 'es' ? 'es-ES' : 'en-US', {
                minimumFractionDigits: 0,
                maximumFractionDigits: 0
            }).format(Math.round(num));
        }

        // פונקציה לעדכון הגרף
        function updateChart(balanceData, contributionsData) {
            const ctx = document.getElementById('growthChart').getContext('2d');
            const t = translations[currentLang];
            
            // אם אין נתונים - גרף ריק עם צירים
            if (balanceData.length === 0 || balanceData.every(val => val === 0)) {
                if (chartInstance) {
                    chartInstance.destroy();
                }
                chartInstance = new Chart(ctx, {
                    type: 'line',
                    data: {
                        labels: [],
                        datasets: []
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                display: false
                            }
                        },
                        scales: {
                            x: {
                                grid: {
                                    display: true,
                                    color: 'rgba(0, 0, 0, 0.08)',
                                    lineWidth: 1
                                },
                                border: {
                                    display: true,
                                    color: 'rgba(0, 0, 0, 0.2)',
                                    width: 2
                                },
                                ticks: {
                                    display: false
                                }
                            },
                            y: {
                                beginAtZero: true,
                                ticks: {
                                    display: false
                                },
                                grid: {
                                    display: true,
                                    color: 'rgba(0, 0, 0, 0.08)',
                                    lineWidth: 1
                                },
                                border: {
                                    display: true,
                                    color: 'rgba(0, 0, 0, 0.2)',
                                    width: 2
                                }
                            }
                        }
                    }
                });
                return;
            }
            
            // יצירת תוויות
            const labels = balanceData.map((_, index) => 
                index === 0 ? t.chart_start : `${t.chart_year} ${index}`
            );

            if (chartInstance) {
                chartInstance.destroy();
            }

            chartInstance = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: labels,
                    datasets: [
                        {
                            label: t.chart_principal,
                            data: balanceData,
                            borderColor: 'rgb(59, 130, 246)',
                            backgroundColor: 'rgba(59, 130, 246, 0.1)',
                            borderWidth: 3,
                            fill: true,
                            tension: 0.4,
                            pointRadius: 4,
                            pointHoverRadius: 6
                        },
                        {
                            label: t.chart_contributions,
                            data: contributionsData,
                            borderColor: 'rgb(16, 185, 129)',
                            backgroundColor: 'rgba(16, 185, 129, 0.1)',
                            borderWidth: 2,
                            fill: false,
                            tension: 0.4,
                            pointRadius: 3,
                            pointHoverRadius: 5,
                            borderDash: [5, 5]
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    interaction: {
                        mode: 'index',
                        intersect: false,
                    },
                    plugins: {
                        legend: {
                            display: true,
                            position: 'top',
                            align: 'end',
                            rtl: (currentLang === 'he' || currentLang === 'ar'),
                            labels: {
                                font: {
                                    family: currentLang === 'ar' ? 'Cairo' : 
                                           currentLang === 'he' ? 'IBM Plex Sans Arabic' : 'Inter',
                                    size: 13,
                                    weight: '600'
                                },
                                padding: 15,
                                usePointStyle: true,
                                pointStyle: 'circle',
                            }
                        },
                        tooltip: {
                            backgroundColor: 'rgba(0, 0, 0, 0.8)',
                            titleFont: {
                                family: currentLang === 'ar' ? 'Cairo' : 
                                       currentLang === 'he' ? 'IBM Plex Sans Arabic' : 'Inter',
                                size: 14,
                                weight: 'bold'
                            },
                            bodyFont: {
                                family: currentLang === 'ar' ? 'Cairo' : 
                                       currentLang === 'he' ? 'IBM Plex Sans Arabic' : 'Inter',
                                size: 13
                            },
                            padding: 12,
                            cornerRadius: 8,
                            displayColors: true,
                            rtl: (currentLang === 'he' || currentLang === 'ar'),
                            callbacks: {
                                label: function(context) {
                                    return context.dataset.label + ': ' + formatNumber(context.parsed.y);
                                }
                            }
                        }
                    },
                    scales: {
                        x: {
                            grid: {
                                display: false
                            },
                            ticks: {
                                font: {
                                    family: currentLang === 'ar' ? 'Cairo' : 
                                           currentLang === 'he' ? 'IBM Plex Sans Arabic' : 'Inter',
                                    size: 12
                                }
                            }
                        },
                        y: {
                            beginAtZero: true,
                            grid: {
                                color: 'rgba(0, 0, 0, 0.05)'
                            },
                            ticks: {
                                font: {
                                    family: currentLang === 'ar' ? 'Cairo' : 
                                           currentLang === 'he' ? 'IBM Plex Sans Arabic' : 'Inter',
                                    size: 12
                                },
                                callback: function(value) {
                                    return formatNumber(value);
                                }
                            }
                        }
                    }
                }
            });
        }

        // אתחול בטעינת העמוד
        window.addEventListener('load', function() {
            const urlParams = new URLSearchParams(window.location.search);
            const langParam = urlParams.get('lang');
            
            if (langParam && translations[langParam]) {
                switchLanguage(langParam);
            } else {
                switchLanguage('he');
            }
            
            // הצגת גרף ריק עם צירים
            updateChart([], []);
        });

        // הוספת מאזינים לכפתורי השפה
        document.querySelectorAll('.lang-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                const lang = this.getAttribute('data-lang');
                switchLanguage(lang);
            });
        });
    </script>

    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
</body>
</html>
